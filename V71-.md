### V71 - Asset pipleline for Javascript 

Steps :

1. Write JavaScript file
   1. Location :
      1. With asset pipeline: /app/assets/javascripts
      2. Without asset pipeline: /public/javascripts
   2. File name - End in ".js"; CoffeeScript files end in ".coffee"
   3. What is CoffeeScript?
      1. Scripting language that is compiled into JavaScript
      2. Different syntax
      3. More concise, readable code
      4. Not part of rails framework but it's included in the rails app. Requires coffee-rails and uglifier gems
      5. Still controversial as some people love it while some hate it.
   4. jQuery
      1. Popular JavaScript framework
      2. Included by default
      3. jquery-rails gem
      4. Listed in manifest file
2. List JavaScript file in manifest
3. Add manifest to asset precompile list
4. Include a JavaScript tag in HTML

Implementation :

**Writing JS file**
1. Deleting example, pages, sections and subjects coffee script files.

**Manifesting files**
1. Renaming `demo.coffee` to `demo.js` and backspacing all the content inside it and adding a custom simple JS.
2. `cable.js` - Is a manifest file and used for Getting features together for the action cable. Action cable is a higher level piece of technology not needed by a begineer,
3. `application.js` is the main manifest file mentioning which files to manifest in what order.
   1. In the last `turbolinks` is mentioned which is an advanced tech not needed by us so can leave it/remove it. Disabling it
   2. `require_tree .` line at the end tells to add all the files in the current directory of `/app/assets/javascripts/`. Although dont need it so will backspacing `=` sylmbol before it.
   3. Will add demo to the manifest file.
**Listing for pre-compilation**
1. In `/config/initializers/asset.rb`, no need to do anything as application.js is already included for compilation.

**Adding JS link to HTML page**

1. Use rails stylesheet helper instead of html link tag
```
<%= javascript_include_tag ('application') %>
```
2. demo_controller had `layout false`, make it `layout 'application'`
3. Add a javascript link in the `/app/views/demo/index.html.erb` and check the url http://localhost:3000/demo/index
4. Upon page inspection, multiple files are being loaded and in production all of these files will be compressed one single file.

### V72 - Another way of adding JS content to templates and SANTIZING

1. JavaScript Helpers - MOstly put them in the end of the HTML file.
```
<%= javascript_tag("alert('Are you sure?');") %>

<%= javascript_tag do %> alert('Are you sure?'); <% end %>

```
O/P rendered :

```
<script>
//<![CDATA[
alert('Are you sure?');
//]]>
</script>
```

2. Sanitizing JavaScript

```
MALICIOUS INPUT STRING by hacker :
<% text = "'); alert('Gotcha!" %>
```
```
<%= javascript_tag("alert('You said: #{text}');") %> 
```

```
result in 2 malicious alerts :
alert('You said: '); alert('Gotcha!');
```

To prevent this malicious attempt 
--> Use escape_javascript(), j()

```
<%= javascript_tag("alert('You said: #{j(text)}');") %> 
```

2 different alerts were the input string is escaped using backward slash `\`.
```
alert('You said: \'); alert(\'Gotcha!');
```
3. Put escaping only around user submitted portion.

---
### V73 - Asset pipeline for adding images

1. Location With asset pipeline: /app/assets/images 
2. Without asset pipeline: /public/images
3. User-uploaded images must be in : /public/images 
4. Image upload gems for user uploading images 
   `Paperclip and CarrierWave`
5. Rails Image Helpers
   ```
   <%= image_tag('logo.png') %>
   <%= image_tag ('logo.png', :size => '90x55', :alt => 'logo') %>
   <%= image_tag('logo.png', :width => 90, height => 55) %>
   ```
Remember to add single quotes and not double.
Implementation :

1. Add images for plus sign and footer gradient in the `/app/assets/images` 
2. Adding image link tag in the subjects index view
3. Upon page inspection, it is evident that the immage is loaded from the asset directory along with a hash following in it's name. 
4. Added `image-url("footer_gradient.png")` helper in the primary styleseet.
5. Customized footer main div css in primary styleseet.
6. COrrected typo in  layouts `admin.html.erb`