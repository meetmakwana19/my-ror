### V71 - Asset pipleline for Javascript 

Steps :

1. Write JavaScript file
   1. Location :
      1. With asset pipeline: /app/assets/javascripts
      2. Without asset pipeline: /public/javascripts
   2. File name - End in ".js"; CoffeeScript files end in ".coffee"
   3. What is CoffeeScript?
      1. Scripting language that is compiled into JavaScript
      2. Different syntax
      3. More concise, readable code
      4. Not part of rails framework but it's included in the rails app. Requires coffee-rails and uglifier gems
      5. Still controversial as some people love it while some hate it.
   4. jQuery
      1. Popular JavaScript framework
      2. Included by default
      3. jquery-rails gem
      4. Listed in manifest file
2. List JavaScript file in manifest
3. Add manifest to asset precompile list
4. Include a JavaScript tag in HTML

Implementation :

**Writing JS file**
1. Deleting example, pages, sections and subjects coffee script files.

**Manifesting files**
1. Renaming `demo.coffee` to `demo.js` and backspacing all the content inside it and adding a custom simple JS.
2. `cable.js` - Is a manifest file and used for Getting features together for the action cable. Action cable is a higher level piece of technology not needed by a begineer,
3. `application.js` is the main manifest file mentioning which files to manifest in what order.
   1. In the last `turbolinks` is mentioned which is an advanced tech not needed by us so can leave it/remove it. Disabling it
   2. `require_tree .` line at the end tells to add all the files in the current directory of `/app/assets/javascripts/`. Although dont need it so will backspacing `=` sylmbol before it.
   3. Will add demo to the manifest file.
**Listing for pre-compilation**
1. In `/config/initializers/asset.rb`, no need to do anything as application.js is already included for compilation.

**Adding JS link to HTML page**

1. Use rails stylesheet helper instead of html link tag
```
<%= javascript_include_tag ('application') %>
```
2. demo_controller had `layout false`, make it `layout 'application'`
3. Add a javascript link in the `/app/views/demo/index.html.erb` and check the url http://localhost:3000/demo/index
4. Upon page inspection, multiple files are being loaded and in production all of these files will be compressed one single file.

### V72 - Another way of adding JS content to templates and SANTIZING

1. JavaScript Helpers - MOstly put them in the end of the HTML file.
```
<%= javascript_tag("alert('Are you sure?');") %>

<%= javascript_tag do %> alert('Are you sure?'); <% end %>

```
O/P rendered :

```
<script>
//<![CDATA[
alert('Are you sure?');
//]]>
</script>
```

2. Sanitizing JavaScript

```
MALICIOUS INPUT STRING by hacker :
<% text = "'); alert('Gotcha!" %>
```
```
<%= javascript_tag("alert('You said: #{text}');") %> 
```

```
result in 2 malicious alerts :
alert('You said: '); alert('Gotcha!');
```

To prevent this malicious attempt 
--> Use escape_javascript(), j()

```
<%= javascript_tag("alert('You said: #{j(text)}');") %> 
```

2 different alerts were the input string is escaped using backward slash `\`.
```
alert('You said: \'); alert(\'Gotcha!');
```
3. Put escaping only around user submitted portion.

---
### V73 - Asset pipeline for adding images

1. Location With asset pipeline: /app/assets/images 
2. Without asset pipeline: /public/images
3. User-uploaded images must be in : /public/images 
4. Image upload gems for user uploading images 
   `Paperclip and CarrierWave`
5. Rails Image Helpers
   ```
   <%= image_tag('logo.png') %>
   <%= image_tag ('logo.png', :size => '90x55', :alt => 'logo') %>
   <%= image_tag('logo.png', :width => 90, height => 55) %>
   ```
Remember to add single quotes and not double.
Implementation :

1. Add images for plus sign and footer gradient in the `/app/assets/images` 
2. Adding image link tag in the subjects index view
3. Upon page inspection, it is evident that the immage is loaded from the asset directory along with a hash following in it's name. 
4. Added `image-url("footer_gradient.png")` helper in the primary styleseet.
5. Customized footer main div css in primary styleseet.
6. Corrected typo in  layouts `admin.html.erb`

---
### V74 - Rails form helpers

1. Form Helper Types
text style - Will create simplest andd most flexible form of HTML input tag
```
<%= text_field_tag ('name', params[:name]) %>
```

Object aware style - Prepopulates the field with the attributes value
```
<%= text_field(:subject, name) %>
```

form builder style - JUst a shorthand form of the above helper as f will be used to refer the :subject
```
<%= f.text_field(:name) %>
```

Other form helpers
• radio_button

• password field

• check_box

• text_area

• file field

• hidden field

• label


**Example :**

```
form_for(@subject, :html => {:multipart => true}) do 1f||
   f.label(: name) 
   
   f.text_field ( : name, :size => 40, :maxlength => 40) 
   
   f.password_field (: password, :size => 40) 
   
   <!-- hidden from user -->
   f.hidden_field(:token, "abcdef0123456789')
   
   f.text_area(:description, :size => "40x5") # :cols/: rows
   
   f.radio_button(:content_type, "text") 
   f.radio_button(:content_type, "HTML")
   
   <!-- html check box which is unckecked wont send any true/false in the parameters but rails helper send bydefault 0 value if the checkbox isn't checked -->
   f.check_box (:visible)
   
   <!-- allows to pick a file from the hard-drive to upload. -->
   f.file field(:logo) # requires :multipart => true sometimes which is declared above in the definition as form_for takes care of it.
end
```

Implementation :

1. Adding check_box helper in the form templates of subjects, pages, sections.
2. Added `radio_button` and `text_area` in the form of sections.
3. Corrected margin css for form_buttons in admin_additions.css.scss

---
### V75 - Form helpers to work with select option tags

1. Select helper
   1. Object we're working with
   2. Attributes of that object
   3. Choices user is going to select between
   4. Hash of options
   5. Hash of html_options.
   ```
   select(object, attribute, choices, options, html_options)
   ```
   options:

      :selected => object.attribute

      :include_blank => false 

      :prompt => false 

      :disabled => false


2. `choices` argument - full list of options/option tags the user can choose from. Several ways to tell the controller to create these choices

```
form_for(@section) do |f||

   # Range to select from 1 to 5
   f.select( : position, 1..5 )

   # Array of choices
   f.select( :content_type, ['text', 'HTML'] ).

   # Hash - User sees the label Visible, Hidden and 1,2 gets sent to the database.
   f.select( :visible, { "Visible" => 1, "Hidden" => 2 })
   
   # Array of arrays 
   f.select( :page_id, Page.all.map {[p] [ p.name, p.id ]} )

end

```

3. Adding select range helper in the subjects form for position.
   1. For subject_count, adding an instance varibale in the subjects_controller def new and edit
4. Did same for pages and sections.
5. Adding subject id for page id using arrays of array select helper.

---
### V76 - Date and Time form helpers

3 Main helpers :

1. `date_select` - WIll generate 3 diff options (D, M, Y)
   ```
   date_select(object, attribute, options, html_options)

      Options:

      :start year => Time.now.year-5 
      
      :end_year => Time. now.year+5 
      
      :order => [:year, month, :day] :
      
      discard year => false 
      
      :discard_month => false 
      
      :discard_day => false 
      
      :include_blank => false 
      
      :prompt => false 
      
      :use_month_numbers => false 
      
      :add_month_numbers => false 
      
      :use_short_month => false 
      
      :date_separator => ""
   ```

2. `time_select` helper
   ```
   time_select(object, attribute, options, html_options)

      Options:

      :include_seconds => false 
      
      :minute_step => 1 
      
      :include_blank => false 
      
      :prompt => false 
      
      :time_separator => ":"

   ```

3. `datetime_select` helper
   ```
   datetime_select(object, attribute, options, html_options)

      Options:
      
      # all date_select and time_select options 
      :datetime separator => "-".


   ```

1. Adding datetime in forms templates.
   1. Added `datetime_select` form helper
   2. WHitelisted `created_at` in the def subject_params of subjects_controller